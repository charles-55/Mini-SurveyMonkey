<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Result</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link href="/css/main.css" rel="stylesheet">
	<script src="/js/main.js"></script>

<!--    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>-->


</head>
<body>
<p class="title" th:text="'Results for Survey - ' + ${survey.name}" />
<hr>

<div class="allQuestions" th:each="question, iterator : ${survey.questions}">
    <p class="question" th:text="'Question ' + ${iterator.count}"/>
    <p class="question" th:text="${question.content} "/>

    <div th:switch="${question.type.toString()}">
        <div th:case="'OPEN_ENDED'" th:each="answer: ${question.answers}">
            <ul th:each="answer: ${question.answers}">
                <li th:text="${answer}"/>
            </ul>
        </div>
        <div th:case="'NUMBER'">
            <div th:each="option: ${question.getAnswerAsMap().keySet()}">
                <p th:text="${option} + ': ' + ${question.getAnswerAsMap().get(option)}"></p>
<!--                <div id="chart_div" style="width: 900px; height: 500px;"></div>-->
            </div>
            <div>
<!--                <script type="text/javascript">-->
<!--                    google.charts.load("current", {packages:["corechart"]});-->
<!--                    google.charts.setOnLoadCallback(drawChart);-->

<!--                    function drawChart() {-->
<!--                        // Assuming question.getAnswerAsMap() is a JavaScript object-->
<!--                        var answerData = [];-->

<!--                        // Convert the answerData into an array of arrays-->
<!--                        var dataArray = [];-->
<!--                        dataArray.push(...Object.entries(answerData).map(([option, value]) => [option, value]));-->
<!--                        console.log(dataArray);-->

<!--                        var data = google.visualization.arrayToDataTable(dataArray);-->

<!--                        var options = {-->
<!--                            title: 'Your Chart Title',-->
<!--                            legend: { position: 'none' },-->
<!--                        };-->

<!--                        var chart = new google.visualization.Histogram(document.getElementById('chart_div'));-->
<!--                        chart.draw(data, options);-->
<!--                    }-->
<!--                </script>-->
            </div>
        </div>
        <div th:case="'OPTION'">
            <div th:each="option: ${question.getAnswerAsMap().keySet()}">
                <p th:text="${option} + ': ' + ${question.getAnswerAsMap().get(option)}"></p>
            </div>
        </div>
    </div>
</div>

</body>
</html>